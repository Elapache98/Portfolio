console.log("particles.js script loaded!");let scene,camera,renderer,particles,mouseX=0,mouseY=0,windowHalfX=window.innerWidth/2,windowHalfY=window.innerHeight/2;function initParticles(){console.log("Initializing particles...");var e=document.getElementById("particleCanvas");if(e){scene=new THREE.Scene,(camera=new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,1,1e3)).position.z=500,(renderer=new THREE.WebGLRenderer({canvas:e,alpha:!0,antialias:!0})).setSize(window.innerWidth,window.innerHeight),renderer.setClearColor(0,0),console.log("Renderer created, canvas size:",window.innerWidth,window.innerHeight);var n=new Float32Array(12e3),t=new Float32Array(12e3);for(let e=0;e<4e3;e++){var a=600*Math.random()+150,o=Math.random()*Math.PI*2,r=Math.acos(2*Math.random()-1),o=(n[3*e]=a*Math.sin(r)*Math.cos(o),n[3*e+1]=a*Math.sin(r)*Math.sin(o),n[3*e+2]=a*Math.cos(r),new THREE.Color),a=new THREE.Color("#947b57");o.r=Math.max(0,Math.min(1,a.r+.1*(Math.random()-.5))),o.g=Math.max(0,Math.min(1,a.g+.1*(Math.random()-.5))),o.b=Math.max(0,Math.min(1,a.b+.1*(Math.random()-.5))),t[3*e]=o.r,t[3*e+1]=o.g,t[3*e+2]=o.b}var e=new THREE.BufferGeometry,i=(e.setAttribute("position",new THREE.BufferAttribute(n,3)),e.setAttribute("color",new THREE.BufferAttribute(t,3)),document.createElement("canvas")),d=(i.width=32,i.height=32,i.getContext("2d")),s=d.createRadialGradient(16,16,0,16,16,16),s=(s.addColorStop(0,"rgba(255, 255, 255, 0.9)"),s.addColorStop(.3,"rgba(200, 180, 255, 0.7)"),s.addColorStop(.7,"rgba(100, 150, 255, 0.3)"),s.addColorStop(1,"rgba(0, 0, 0, 0)"),d.fillStyle=s,d.fillRect(0,0,32,32),new THREE.CanvasTexture(i)),d=new THREE.PointsMaterial({size:3,vertexColors:!0,transparent:!0,opacity:.8,blending:THREE.AdditiveBlending,map:s,alphaTest:.001,sizeAttenuation:!0});particles=new THREE.Points(e,d),scene.add(particles),console.log("Particles created and added to scene"),document.addEventListener("mousemove",onMouseMove),window.addEventListener("resize",onWindowResize),animate()}else console.error("Canvas not found!")}function onMouseMove(e){mouseX=.5*(e.clientX-windowHalfX),mouseY=.5*(e.clientY-windowHalfY)}function onWindowResize(){windowHalfX=window.innerWidth/2,windowHalfY=window.innerHeight/2,camera.aspect=window.innerWidth/window.innerHeight,camera.updateProjectionMatrix(),renderer.setSize(window.innerWidth,window.innerHeight)}function animate(){requestAnimationFrame(animate),particles.rotation.x+=5e-4,particles.rotation.y+=8e-4,particles.rotation.x+=5e-6*mouseY,particles.rotation.y+=5e-6*mouseX;var n=particles.geometry.attributes.position.array;for(let e=0;e<n.length;e+=3){var t=n[e],a=n[e+1],o=n[e+2],t=Math.sqrt(t*t+a*a+o*o),a=Math.max(.2,t/1e3);n[e+1]+=.05*Math.sin(5e-4*Date.now()+e)*a}particles.geometry.attributes.position.needsUpdate=!0,renderer.render(scene,camera)}function loadThreeJS(){console.log("Loading Three.js...");var e=document.createElement("script");e.src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js",e.onload=function(){console.log("Three.js loaded successfully"),initParticles()},e.onerror=function(){console.error("Failed to load Three.js")},document.head.appendChild(e)}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",loadThreeJS):loadThreeJS();